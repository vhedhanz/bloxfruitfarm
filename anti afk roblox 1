-- ====================
-- INISIALISASI INSTANCE
-- ====================
wait(0.5)

local Players = game:service'Players'
local LocalPlayer = Players.LocalPlayer
local RunService = game:service'RunService' 
local bb = game:service'VirtualUser' 

-- Perubahan: Menggunakan PlayerGui, ini lebih aman dan umum di Client-Side Scripting
local ba = Instance.new("ScreenGui")
ba.Parent = LocalPlayer:WaitForChild("PlayerGui") -- <-- BARIS INI DIGANTI
ba.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local ca = Instance.new("Frame")            
local HeaderLabel = Instance.new("TextLabel") 
local CloseButton = Instance.new("TextButton") 
local LineSeparator = Instance.new("Frame")    
local ContentFrame = Instance.new("Frame")     

local PingText = Instance.new("TextLabel")     
local FpsText = Instance.new("TextLabel")      
local StatusText = Instance.new("TextLabel")   
local TimerText = Instance.new("TextLabel")    

local startTime = tick()

-- ====================
-- PROPERTI GUI UTAMA & FRAME UTAMA
-- ====================

-- Frame Utama (ca)
ca.Parent = ba
ca.Active = true
ca.BackgroundColor3 = Color3.new(0.196078, 0.196078, 0.196078)
ca.BackgroundTransparency = 0 
ca.Draggable = true 
ca.Position = UDim2.new(0.5, -100, 0.2, 0)
ca.Size = UDim2.new(0, 200, 0, 100)

-- ====================
-- HEADER DAN TOMBOL CLOSE
-- ====================

-- Label Judul (HeaderLabel)
HeaderLabel.Parent = ca
HeaderLabel.BackgroundColor3 = Color3.new(0.15, 0.15, 0.15)
HeaderLabel.BackgroundTransparency = 0
HeaderLabel.Size = UDim2.new(1, 0, 0, 25)
HeaderLabel.Font = Enum.Font.SourceSansSemibold
HeaderLabel.Text = "Anti Afk By hassanxzayn"
HeaderLabel.TextColor3 = Color3.new(1, 1, 1)
HeaderLabel.TextSize = 14
HeaderLabel.TextXAlignment = Enum.TextXAlignment.Center

-- Tombol Close (X)
CloseButton.Parent = HeaderLabel 
CloseButton.BackgroundColor3 = Color3.new(0.15, 0.15, 0.15) 
CloseButton.BackgroundTransparency = 0
CloseButton.Size = UDim2.new(0, 20, 1, 0) 
CloseButton.Position = UDim2.new(1, -20, 0, 0) 
CloseButton.Font = Enum.Font.SourceSansBold
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.new(1, 1, 1)
CloseButton.TextSize = 18

-- Garis Pemisah (LineSeparator)
LineSeparator.Parent = ca
LineSeparator.BackgroundColor3 = Color3.new(1, 1, 1)
LineSeparator.Size = UDim2.new(1, 0, 0, 2)
LineSeparator.Position = UDim2.new(0, 0, 0, 25)

-- ====================
-- KONTEN UTAMA (PING, FPS, STATUS, TIMER)
-- ====================

-- Frame Konten (ContentFrame) 
ContentFrame.Parent = ca
ContentFrame.BackgroundColor3 = Color3.new(0.196078, 0.196078, 0.196078) 
ContentFrame.BackgroundTransparency = 0
ContentFrame.Position = UDim2.new(0, 0, 0, 27) 
ContentFrame.Size = UDim2.new(1, 0, 0, 73)

-- PING (PingText)
PingText.Parent = ContentFrame
PingText.BackgroundTransparency = 1
PingText.Size = UDim2.new(0.5, 0, 0.5, 0)
PingText.Position = UDim2.new(0, 0, 0, 0)
PingText.Font = Enum.Font.SourceSans
PingText.Text = "Ping: 0"
PingText.TextColor3 = Color3.new(1, 1, 1)
PingText.TextSize = 16
PingText.TextXAlignment = Enum.TextXAlignment.Left
PingText.TextYAlignment = Enum.TextYAlignment.Top

-- FPS (FpsText)
FpsText.Parent = ContentFrame
FpsText.BackgroundTransparency = 1
FpsText.Size = UDim2.new(0.5, 0, 0.5, 0)
FpsText.Position = UDim2.new(0.5, 0, 0, 0)
FpsText.Font = Enum.Font.SourceSans
FpsText.Text = "Fps: 0"
FpsText.TextColor3 = Color3.new(1, 1, 1)
FpsText.TextSize = 16
FpsText.TextXAlignment = Enum.TextXAlignment.Right
FpsText.TextYAlignment = Enum.TextYAlignment.Top

-- Status Anti-AFK (StatusText)
StatusText.Parent = ContentFrame
StatusText.BackgroundTransparency = 1
StatusText.Size = UDim2.new(0.7, 0, 0.5, 0) 
StatusText.Position = UDim2.new(0, 0, 0.5, 0)
StatusText.Font = Enum.Font.SourceSans
StatusText.Text = "Anti-AFK is Enabled"
StatusText.TextColor3 = Color3.new(1, 1, 1)
StatusText.TextSize = 16
StatusText.TextXAlignment = Enum.TextXAlignment.Left
StatusText.TextYAlignment = Enum.TextYAlignment.Center

-- Timer (TimerText)
TimerText.Parent = ContentFrame
TimerText.BackgroundTransparency = 1
TimerText.Size = UDim2.new(0.3, 0, 0.5, 0) 
TimerText.Position = UDim2.new(0.7, 0, 0.5, 0)
TimerText.Font = Enum.Font.SourceSans
TimerText.Text = "0:0:00"
TimerText.TextColor3 = Color3.new(1, 1, 1)
TimerText.TextSize = 16
TimerText.TextXAlignment = Enum.TextXAlignment.Right
TimerText.TextYAlignment = Enum.TextYAlignment.Center

-- ====================
-- LOGIKA FUNGSI
-- ====================

-- LOGIKA ANTI-AFK
LocalPlayer.Idled:Connect(function()
    bb:CaptureController()
    bb:ClickButton2(Vector2.new())
    StatusText.Text = "Jangan usir aku Roblox!" 
    wait(2)
    StatusText.Text = "Anti-AFK is Enabled" 
end)

-- LOGIKA UPDATE TAMPILAN
RunService.Heartbeat:Connect(function(step)
    -- Update FPS
    local fps = math.floor(1 / step)
    FpsText.Text = "Fps: " .. fps
    
    -- Update Ping (Latency)
    local ping = math.floor(LocalPlayer.NetworkPing * 1000)
    PingText.Text = "Ping: " .. ping
    
    -- Update Timer
    local elapsedTime = tick() - startTime
    local seconds = math.floor(elapsedTime % 60)
    local minutes = math.floor((elapsedTime / 60) % 60)
    local hours = math.floor(elapsedTime / 3600)
    
    TimerText.Text = string.format("%d:%02d:%02d", hours, minutes, seconds)
end)

-- LOGIKA TOMBOL CLOSE
CloseButton.MouseButton1Click:Connect(function()
    ba:Destroy()
end)
